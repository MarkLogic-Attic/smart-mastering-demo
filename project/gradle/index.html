<!doctype html>
<!--[if lt IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie6" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 7 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie7" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 8 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie8" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 9 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie9" class="ie" lang="en-US"><![endif]-->
<!--[if gt IE 9]><!--><html itemscope itemtype="http://schema.org/Organization" lang="en-US"><!--<![endif]-->
<head>

    <!-- Meta -->
    <meta charset="utf-8">
    <title>Creating a DHF Project using the Gradle Plugin - Data Hub Framework</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Favicons -->
    <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64 96x96" href="/marklogic-data-hub/favicon.ico">
    <meta name="application-name" content="Data Hub Framework - A data hub framework for MarkLogic">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-6638631-15', 'auto');
      ga('send', 'pageview');

    </script>

    <!-- Facebook Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
    document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1879746318909687'); // Insert your pixel ID here.
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1879746318909687&ev=PageView&noscript=1"
    /></noscript>
    <!-- DO NOT MODIFY -->
    <!-- End Facebook Pixel Code -->
    <link type="text/css" rel="stylesheet" href="/marklogic-data-hub/assets/bundle.css">
</head>
<body class="">

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/marklogic-data-hub">
                  <span class="logo">
                    <img src="/marklogic-data-hub/images/logo-marklogic.svg" width="150px" height="36px" alt="MarkLogic" title="MarkLogic" scale="0">
                  </span>
                  Data Hub Framework
                </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    
                        <li  >
                            
                            <a href="/marklogic-data-hub/">Getting Started</a>
                            
                        </li>
                    
                        <li  >
                            
                            <a href="/marklogic-data-hub/tutorial/">Tutorial</a>
                            
                        </li>
                    
                        <li  >
                            
                            <a href="https://github.com/marklogic-community/marklogic-data-hub">DHF on GitHub</a>
                            
                        </li>
                    
                </ul>
            </div>
        </div>
    </nav>




  <div class="bannered-image">
  <picture>
    <source srcset="/marklogic-data-hub/images/Solution-enterprise-data-hub-xs.jpg" media="(max-width: 400px)">
    <source srcset="/marklogic-data-hub/images/Solution-enterprise-data-hub-sm.jpg" media="(max-width: 800px)">
    <source srcset="/marklogic-data-hub/images/Solution-enterprise-data-hub-lg.jpg" media="(min-width: 801px)">
    <img srcset="/marklogic-data-hub/images/Solution-enterprise-data-hub-lg.jpg" alt="Operational Data Hub" scale="0">
  </picture>
  <div class="banner banner-light banner-center text-center">
    <div class="center-container">
      <div class="centered-text">
        <div class="col-sm-12 text-right text-center">
          <img alt="dhf icon" src="/marklogic-data-hub/images/odh.svg" scale="0" class="icon-left">
          <h3>
          
            Creating a DHF Project using the Gradle Plugin
          
          </h3>
        </div>
      </div>
    </div>
  </div>
</div>


  <article>
    <div class="container">
      <div class="row">
        <div class="side-nav col-md-2 hide-small">
          <div class="panel panel-default">
  <div class="panel-heading">Navigation</div>
  <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/">Getting Started</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/">Understanding DHF</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/concepts/">Concepts</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/architecture/">Architecture</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/how-it-works/">How It Works</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/flowtracing/">Flow Tracing</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/project-structure/">Project Structure</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/tutorial/">Tutorial</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/using/">Using the DHF</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/project/">Create a Project</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/project/quickstart/">QuickStart</a>
    
    
  </li>
  
  <li  class="list-group-item active"  >
    
    <a href="/marklogic-data-hub/project/gradle/">Gradle Plugin</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/">Ingest</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/quickstart/">QuickStart</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/mlcp/">MLCP</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/marklogic-client-api/">MarkLogic Client API</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/rest/">REST API</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/">Harmonize</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/quickstart/">Quickstart</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/gradle/">Gradle</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/java/">Java Library</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/rest/">REST</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/serve/">Serve</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/serve/rest/">REST</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/serve/odbc/">ODBC</a>
    
    
  </li>
  
</ul>

    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/docs/">Docs</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/docs/gradle-tasks/">Gradle Tasks</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/docs/server-side/">Server Side (xqy, sjs)</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/javadocs/">Javadocs</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/faqs/">FAQs</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="https://github.com/marklogic-community/marklogic-data-hub">DHF on GitHub</a>
    
    
  </li>
  
</ul>

</div>

        </div>
        <div class="col-md-10">
          <h2 id="creating-a-project-with-the-ml-data-hub-gradle-plugin">Creating a Project with the ml-data-hub Gradle Plugin</h2>
<p>In order to get started with the <strong>ml-data-hub</strong> Gradle plugin you will need to perform a few steps.</p>

<ol>
  <li><a href="#install-prerequisites">Install Prerequisite Software</a></li>
  <li><a href="#creating-your-project">Create a DHF Project</a></li>
  <li><a href="#set-username-and-password">Set username and password</a></li>
</ol>

<h2 id="install-prerequisites">Install Prerequisites</h2>
<p>You will need the following items to use the ml-data-hub Gradle plugin:</p>
<ol>
  <li><a href="https://gradle.org/">Gradle 3.4</a> or newer (if you have an older version installed we can work around that)</li>
  <li>MarkLogic 9.0-1.1 or newer</li>
</ol>

<p>Before we continue, let’s address the Gradle version. If you have version 3.4 or newer then you are golden. Check like so:</p>

<pre class="cmdline">
gradle -v
</pre>

<p>If you have an older version of gradle then you can either upgrade or install the gradle wrapper. The gradle wrapper is crazy simple to install and we recommend you do that. <strong>THIS IS ONLY NECESSARY IF YOU DON’T HAVE VERSION 3.4 OR NEWER.</strong></p>

<pre class="cmdline">
gradle wrapper --gradle-version 3.4
</pre>

<p>After running this command you will need to run gradle via the shell scripts (for *nix systems) or the batch file (for windows systems)</p>

<div class="code-tabs">
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
      <a role="tab" aria-controls="linux-1" href="#linux-1">Unix Systems</a>
    </li>
    <li role="presentation" class="">
      <a role="tab" aria-controls="windows-1" href="#windows-1">Windows</a>
    </li>
  </ul>
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="linux-1">
      <pre class="cmdline">./gradlew ...</pre>
    </div>
    <div role="tabpanel" class="tab-pane" id="windows-1">
      <pre class="cmdline">gradlew.bat ...</pre>
    </div>
  </div>
</div>

<h2 id="creating-your-project">Creating Your Project</h2>
<p>The first step in using ml-data-hub is to create your DHF project. Start off by creating a project directory (henceforth referred to as $project-dir).</p>

<p>Now create a <code class="highlighter-rouge">build.gradle</code> file in that directory. $project-dir/build.gradle. It should look like this:</p>

<p><strong>$project-dir/build.gradle</strong></p>
<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span> <span class="o">{</span>
    <span class="c1">// This plugin allows you to create different environments</span>
    <span class="c1">// for your gradle deploy. Each environment is represented</span>
    <span class="c1">// by a gradle-${env}.properties file</span>
    <span class="c1">// See https://github.com/stevesaliman/gradle-properties-plugin</span>
    <span class="c1">// specify the env on the command line with:</span>
    <span class="c1">// gradle -PenvironmentName=x ...</span>
    <span class="n">id</span> <span class="s1">'net.saliman.properties'</span> <span class="n">version</span> <span class="s1">'1.4.6'</span>

    <span class="c1">// This gradle plugin extends the ml-gradle plugin with</span>
    <span class="c1">// commands that make the Data Hub Framework do its magic</span>
    <span class="n">id</span> <span class="s1">'com.marklogic.ml-data-hub'</span> <span class="n">version</span> <span class="s1">'2.0.3'</span>
<span class="o">}</span>
</code></pre></div></div>

<p>We assume you straightened out your gradle version above. Let’s initialize our DHF project.</p>

<div class="code-tabs">
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
      <a role="tab" aria-controls="linux-2" href="#linux-2">Unix Systems</a>
    </li>
    <li role="presentation" class="">
      <a role="tab" aria-controls="windows-2" href="#windows-2">Windows</a>
    </li>
  </ul>
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="linux-2">
      <pre class="cmdline">./gradlew hubInit</pre>
    </div>
    <div role="tabpanel" class="tab-pane" id="windows-2">
      <pre class="cmdline">gradlew.bat hubInit</pre>
    </div>
  </div>
</div>

<p>You should see output like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>############################################
# Your Data Hub Framework Project is ready.
############################################

 - Set username and password
     There are several ways to do this. The easiest is to set mlUsername and mlPassword in gradle.properties.
     For other approaches see: https://github.com/marklogic-community/marklogic-data-hub/wiki/Password-Management

 - To deploy your application into MarkLogic...
     gradle mlDeploy    # this will bootstrap your application
     gradle mlLodModules        # this will load your custom plugins into MarkLogic

 - Full list of gradle tasks:
     https://github.com/marklogic-community/marklogic-data-hub/wiki/Gradle-Tasks

 - Curious about the project structure?
     Look here: https://github.com/marklogic-community/marklogic-data-hub/wiki/Project-Directory-Structure

BUILD SUCCESSFUL

Total time: 1.932 secs
</code></pre></div></div>

<p>Your DHF project has been initialized and you are ready to get down to business.</p>

<h2 id="set-username-and-password">Set username and password</h2>
<p>Note that in the output above you are instructed to set your username and password. In order for the <strong>ml-data-hub</strong> Gradle plugin to communicate with MarkLogic you must complete this step.</p>

<p>You have a few options for doing this.</p>

<h3 id="1-set-the-username-and-password-in-your-properties-file">1. Set the Username and Password in your properties file</h3>
<p>Open <code class="highlighter-rouge">$project-dir/gradle.properties</code>. Supply your MarkLogic username and password.</p>

<p><strong>$project-dir/gradle.properties</strong></p>
<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">mlUsername</span><span class="p">=</span><span class="s">admin</span>
<span class="py">mlPassword</span><span class="p">=</span><span class="s">admin</span>
</code></pre></div></div>

<h3 id="2-set-the-username-and-password-in-your-environment-specific-properties-file">2. Set the Username and Password in your environment specific properties file</h3>
<p>Open <code class="highlighter-rouge">$project-dir/gradle-$env.properties</code> where <code class="highlighter-rouge">$env</code> is the environment you wish to setup. By default the project has the <code class="highlighter-rouge">local</code> environment. Supply your MarkLogic username and password.</p>

<p><strong>$project-dir/gradle-local.properties</strong></p>
<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">mlUsername</span><span class="p">=</span><span class="s">admin</span>
<span class="py">mlPassword</span><span class="p">=</span><span class="s">admin</span>
</code></pre></div></div>

<h3 id="3-supply-the-username-and-password-on-the-command-line">3. Supply the Username and Password on the command line</h3>
<p>If you don’t want to store your username and password in files you can supply them on the command line.</p>

<div class="code-tabs">
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
      <a role="tab" aria-controls="linux-3" href="#linux-3">Unix Systems</a>
    </li>
    <li role="presentation" class="">
      <a role="tab" aria-controls="windows-3" href="#windows-3">Windows</a>
    </li>
  </ul>
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="linux-3">
      <pre class="cmdline">./gradlew someTask -PmlUsername=admin -PmlPassword=admin</pre>
    </div>
    <div role="tabpanel" class="tab-pane" id="windows-3">
      <pre class="cmdline">gradlew.bat someTask -PmlUsername=admin -PmlPassword=admin</pre>
    </div>
  </div>
</div>


        </div>
      </div>
    </div>
  </article>


    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>
                    Copyright © 2016-2018 MarkLogic Corporation. All Rights Reserved. MARKLOGIC® is a registered trademark of MarkLogic Corporation.
                    </p>
                </div>
            </div>
        </div>
    </footer>


    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="/marklogic-data-hub/js/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="/marklogic-data-hub/assets/bundle.js" id="1"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-79716597-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>

